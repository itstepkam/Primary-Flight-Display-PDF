{"entries":[{"timestamp":1733505265182,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"http"],[-1,"s"],[0,"://"],[-1,"developers.google.com/blockly/xml\"><variables></variables>"],[1,"www.w3.org/1999/xhtml\">\n  "],[0,"<blo"]],"start1":12,"start2":12,"length1":70,"length2":37},{"diffs":[[0,"art\""],[-1," x=\"20\" y=\"20\""],[0,"></b"]],"start1":67,"start2":67,"length1":22,"length2":8},{"diffs":[[0,"</block>"],[1,"\n  "],[0,"<block t"]],"start1":72,"start2":72,"length1":16,"length2":19},{"diffs":[[0,"ver\""],[-1," x=\"225\" y=\"20\""],[0,"></b"]],"start1":107,"start2":107,"length1":23,"length2":8},{"diffs":[[0,"</block>"],[1,"\n"],[0,"</xml>"]],"start1":112,"start2":112,"length1":14,"length2":15}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"let timeDown = 0; // Таймер для наклона вниз\nlet timeUp = 0;   // Таймер для наклона вверх\n\nbasic.forever(function () {\n    // Получаем углы тангажа и крена\n    let pitch = input.rotation(Rotation.Pitch); // Вперед/назад\n    let roll = input.rotation(Rotation.Roll);  // Влево/вправо\n\n    // Проверяем вертикальное положение\n    if (Math.abs(pitch) < 10 && Math.abs(roll) < 10) {\n        // Устройство ровное, отображаем горизонтальную линию\n        basic.clearScreen();\n        for (let x = 0; x < 5; x++) {\n            led.plot(x, 2); // Линия по центру\n        }\n        // Сбрасываем таймеры\n        timeDown = 0;\n        timeUp = 0;\n    } else {\n        // Очищаем экран\n        basic.clearScreen();\n\n        // Рисуем наклоненную линию\n        let centerRow = Math.map(pitch, -90, 90, 0, 4);\n        let centerColumn = Math.map(roll, -90, 90, 0, 4);\n        centerRow = Math.clamp(0, 4, Math.round(centerRow));\n        centerColumn = Math.clamp(0, 4, Math.round(centerColumn));\n        for (let x = 0; x < 5; x++) {\n            let row = centerRow + (x - 2) * (centerColumn - 2) / 2;\n            row = Math.clamp(0, 4, Math.round(row));\n            led.plot(x, row);\n        }\n\n        // Проверяем наклон вниз (тангаж больше 45°)\n        if (pitch > 45) {\n            timeDown += 100; // Увеличиваем таймер\n            if (timeDown >= 5000) {\n                // Проигрываем \"Pull Up\" сигнал\n                for (let i = 0; i < 3; i++) {\n                    music.playTone(Note.C5, music.beat(BeatFraction.Quarter));\n                    basic.pause(100);\n                }\n                timeDown = 0; // Сбрасываем таймер\n            }\n        } else {\n            timeDown = 0; // Сбрасываем, если устройство не наклонено\n        }\n\n        // Проверяем наклон вверх (тангаж меньше -45°)\n        if (pitch < -45) {\n            timeUp += 100; // Увеличиваем таймер\n            if (timeUp >= 5000) {\n                // Проигрываем \"Roll\" сигнал\n                for (let i = 0; i < 3; i++) {\n                    music.playTone(Note.G3, music.beat(BeatFraction.Half));\n                    basic.pause(200);\n                }\n                timeUp = 0; // Сбрасываем таймер\n            }\n        } else {\n            timeUp = 0; // Сбрасываем, если устройство не наклонено\n        }\n    }\n\n    basic.pause(100); // Задержка цикла\n});"],[0,"\n"]],"start1":0,"start2":0,"length1":2339,"length2":1}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"   \""],[-1,"preferredEditor\": \"tsprj\""],[1,"additionalFilePaths\": []"],[0,"\n}\n"]],"start1":252,"start2":252,"length1":32,"length2":31}]}]},{"timestamp":1733505707151,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"input.onButtonPressed(Button.A, function () {\n    // Сигнал для PAN, PAN\n    for (let i = 0; i < 2; i++) {\n        music.playTone(Note.E5, music.beat(BeatFraction.Half));\n        basic.pause(200);\n    }\n});\n\ninput.onButtonPressed(Button.B, function () {\n    // Сигнал для MAYDAY, MAYDAY\n    for (let i = 0; i < 2; i++) {\n        music.playTone(Note.C5, music.beat(BeatFraction.Whole));\n        music.playTone(Note.G4, music.beat(BeatFraction.Whole));\n        basic.pause(400);\n    }\n});\n\ninput.onButtonPressed(Button.AB, function () {\n    // Сигнал для SÉCURITÉ\n    music.playTone(Note.G3, music.beat(BeatFraction.Double));\n    basic.pause(400);\n});\n\n"],[0,"let "]],"start1":0,"start2":0,"length1":655,"length2":4}]}]},{"timestamp":1733505997112,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"es><"],[-1,"variable id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</variable><variable id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</variable><variable id=\"oy-#AU%6JsT9asrmCF}}\">x</variable><variable id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</variable><variable id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</variable><variable id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</variable><variable id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</variable><variable id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</variable><variable id=\"s5sl{zqtQ$vemt/G6ud4\">x2</variable><variable id=\";k#MGtm*$a%=VB,nGuob\">row</variable></variables><comment x=\"1874.46875\" y=\"20\" w=\"230\" h=\"120\">\nТаймер для наклона вниз\n</comment><comment x=\"2149.46875\" y=\"20\" w=\"240\" h=\"120\">\nТаймер для наклона вверх\n</comment><block type=\"device_forever\" x=\"20\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Таймер для долгого крена или тангажа</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field><comment pinned=\"false\" h=\"80\" w=\"160\">Получаем углы тангажа и крена\nВперед/назад</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Pitch</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field><comment pinned=\"false\" h=\"80\" w=\"160\">Влево/вправо</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем вертикальное положение</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Устройство ровное, отображаем горизонтальную линию</comment><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"oy-#AU%6JsT9asrmCF}}\">x</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">4</field></block></value><statement name=\"DO\"><block type=\"device_plot\"><comment pinned=\"false\" h=\"80\" w=\"160\">Линия по центру</comment><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oy-#AU%6JsT9asrmCF}}\">x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">2</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймеры</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Очищаем экран</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</field><comment pinned=\"false\" h=\"80\" w=\"160\">Рисуем наклоненную линию</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"centerRow = Math.clamp(0, 4, Math.round(centerRow));\" numlines=\"1\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"centerColumn = Math.clamp(0, 4, Math.round(centerColumn));\" numlines=\"1\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">4</field></block></value><statement name=\"DO\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k#MGtm*$a%=VB,nGuob\">row</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"row = Math.clamp(0, 4, Math.round(row));\" numlines=\"1\"></mutation><next><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k#MGtm*$a%=VB,nGuob\">row</field></block></value></block></next></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем наклон вниз (тангаж больше 45°)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Увеличиваем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Иногда TRAFFIC + Pull Up</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">Math.random()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.3</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRAFFIC</field></shadow></value></block></statement><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Проигрываем \"Pull Up\" сигнал</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">523</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Quarter</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если устройство не наклонено</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем наклон вверх (тангаж меньше -45°)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-45</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Увеличиваем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Иногда TRAFFIC + Roll</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">Math.random()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.3</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRAFFIC</field></shadow></value></block></statement><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Проигрываем \"Roll\" сигнал</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">196</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Half</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если устройство не наклонено</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем долгий крен или тангаж</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Если наклон держится больше 10 секунд</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">SPEED</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если угол меньше 30°</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Задержка цикла</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"device_gesture_event\" x=\"1225\" y=\"20\"><field name=\"NAME\">Gesture.Shake</field><comment pinned=\"false\" h=\"80\" w=\"160\">Реакция на встряхивание</comment><statement name=\"HANDLER\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">7600</field></shadow></value><next><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">880</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Half</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement></block></next></block></statement"],[1,"/variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\""],[0,"></b"]],"start1":63,"start2":63,"length1":20062,"length2":111}]},{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"let pitch = 0\nlet roll = 0\nlet timeDown = 0\nlet timeUp = 0\nlet timeTurn = 0\nlet centerRow = 0\nlet centerColumn = 0\nlet row = 0\n/**\n * Таймер для наклона вниз\n */\n/**\n * Таймер для наклона вверх\n */\n// Реакция на встряхивание\ninput.onGesture(Gesture.Shake, function () {\n    basic.showString(\"7600\")"],[1,"input.onButtonPressed(Button.A, function () {\n    // Сигнал для PAN, PAN\n    for (let i = 0; i < 2; i++) {\n        music.playTone(Note.E5, music.beat(BeatFraction.Half));\n        basic.pause(200);\n    }\n});\n\ninput.onButtonPressed(Button.B, function () {\n    // Сигнал для MAYDAY, MAYDAY"],[0,"\n   "]],"start1":0,"start2":0,"length1":302,"length2":290},{"diffs":[[0,"et i"],[-1,"ndex"],[0," = 0; i"],[-1,"ndex"],[0," < "],[-1,"3"],[1,"2"],[0,"; i"],[-1,"ndex"],[0,"++) "]],"start1":297,"start2":297,"length1":34,"length2":22},{"diffs":[[0,"one("],[-1,"880"],[1,"Note.C5"],[0,", mu"]],"start1":340,"start2":340,"length1":11,"length2":15},{"diffs":[[0,"at(BeatFraction."],[-1,"Half"],[1,"Whole));\n        music.playTone(Note.G4, music.beat(BeatFraction.Whole"],[0,"))"],[1,";"],[0,"\n        basic.p"]],"start1":361,"start2":361,"length1":38,"length2":105},{"diffs":[[0,"basic.pause("],[-1,"1"],[1,"4"],[0,"00)"],[1,";"],[0,"\n    }\n})\n//"]],"start1":459,"start2":459,"length1":28,"length2":29},{"diffs":[[0,"}\n})"],[-1,"\n// Таймер для долгого крена или тангажа"],[1,";\n\ninput.onButtonPressed(Button.AB, function () {\n    // Сигнал для SÉCURITÉ\n    music.playTone(Note.G3, music.beat(BeatFraction.Double));\n    basic.pause(400);\n});\n\nlet timeDown = 0; // Таймер для наклона вниз\nlet timeUp = 0;   // Таймер для наклона вверх\n"],[0,"\nbas"]],"start1":481,"start2":481,"length1":48,"length2":265},{"diffs":[[0,"    "],[-1,"// Вперед/назад\n   "],[1,"let"],[0," pit"]],"start1":808,"start2":808,"length1":27,"length2":11},{"diffs":[[0,"tch)"],[-1,"\n   "],[1,";"],[0," // В"],[-1,"лево/вправо\n   "],[1,"перед/назад\n    let"],[0," rol"]],"start1":850,"start2":850,"length1":32,"length2":33},{"diffs":[[0,"on.Roll)"],[1,";  // Влево/вправо\n"],[0,"\n    // "]],"start1":908,"start2":908,"length1":16,"length2":35},{"diffs":[[0,"ic.clearScreen()"],[1,";"],[0,"\n        for (le"]],"start1":1104,"start2":1104,"length1":32,"length2":33},{"diffs":[[0,"= 0; x <"],[-1,"= 4"],[1," 5"],[0,"; x++) {"]],"start1":1141,"start2":1141,"length1":19,"length2":18},{"diffs":[[0,"\n           "],[1," led.plot(x, 2);"],[0," // Линия по"]],"start1":1159,"start2":1159,"length1":24,"length2":40},{"diffs":[[0,"тру\n"],[-1,"            led.plot(x, 2)\n"],[0,"    "]],"start1":1203,"start2":1203,"length1":35,"length2":8},{"diffs":[[0,"    timeDown = 0"],[1,";"],[0,"\n        timeUp "]],"start1":1251,"start2":1251,"length1":32,"length2":33},{"diffs":[[0," = 0"],[-1,"\n        timeTurn = 0"],[1,";"],[0,"\n   "]],"start1":1283,"start2":1283,"length1":29,"length2":9},{"diffs":[[0,"Screen()"],[1,";\n"],[0,"\n       "]],"start1":1346,"start2":1346,"length1":16,"length2":18},{"diffs":[[0,"ю линию\n        "],[1,"let "],[0,"centerRow = Math"]],"start1":1385,"start2":1385,"length1":32,"length2":36},{"diffs":[[0,", -90, 90, 0, 4)"],[1,";"],[0,"\n        centerC"]],"start1":1431,"start2":1431,"length1":32,"length2":33},{"diffs":[[0,"4);\n        "],[1,"let "],[0,"centerColumn"]],"start1":1445,"start2":1445,"length1":24,"length2":28},{"diffs":[[0,"0, 0, 4)"],[1,";"],[0,"\n       "]],"start1":1497,"start2":1497,"length1":16,"length2":17},{"diffs":[[0,"rRow));\n"],[1,"        "],[0,"centerCo"]],"start1":1560,"start2":1560,"length1":16,"length2":24},{"diffs":[[0,"lumn));\n"],[1,"        "],[0,"for (let"]],"start1":1627,"start2":1627,"length1":16,"length2":24},{"diffs":[[0,"et x"],[-1,"2"],[0," = 0; x"],[-1,"2"],[0," <"],[-1,"= 4"],[1," 5"],[0,"; x"],[-1,"2"],[0,"++) "]],"start1":1649,"start2":1649,"length1":26,"length2":22},{"diffs":[[0,"            "],[1,"let "],[0,"row = center"]],"start1":1673,"start2":1673,"length1":24,"length2":28},{"diffs":[[0,"Row + (x"],[-1,"2"],[0," - 2) * "]],"start1":1701,"start2":1701,"length1":17,"length2":16},{"diffs":[[0,"- 2) / 2"],[1,";"],[0,"\n       "]],"start1":1731,"start2":1731,"length1":16,"length2":17},{"diffs":[[0,"(row));\n"],[1,"            "],[0,"led.plot"]],"start1":1786,"start2":1786,"length1":16,"length2":28},{"diffs":[[0,"ot(x"],[-1,"2"],[0,", row)"],[1,";"],[0,"\n   "]],"start1":1812,"start2":1812,"length1":15,"length2":15},{"diffs":[[0,"row);\n        }\n"],[1,"\n"],[0,"        // Прове"]],"start1":1818,"start2":1818,"length1":32,"length2":33},{"diffs":[[0,"5) {\n           "],[1," timeDown += 100;"],[0," // Увеличиваем "]],"start1":1909,"start2":1909,"length1":32,"length2":49},{"diffs":[[0,"мер\n"],[-1,"            timeDown += 100\n"],[0,"    "]],"start1":1961,"start2":1961,"length1":36,"length2":8},{"diffs":[[0,") {\n"],[-1,"                // Иногда TRAFFIC + Pull Up\n                if (Math.random() < 0.3) {\n                    basic.showString(\"TRAFFIC\")\n                }\n"],[0,"    "]],"start1":1997,"start2":1997,"length1":161,"length2":8},{"diffs":[[0,"et i"],[-1,"ndex"],[0," = 0; i"],[-1,"ndex"],[0," < 3; i"],[-1,"ndex"],[0,"++) "]],"start1":2071,"start2":2071,"length1":34,"length2":22},{"diffs":[[0,"one("],[-1,"523"],[1,"Note.C5"],[0,", mu"]],"start1":2126,"start2":2126,"length1":11,"length2":15},{"diffs":[[0,"uarter))"],[1,";"],[0,"\n       "]],"start1":2164,"start2":2164,"length1":16,"length2":17},{"diffs":[[0,"use(100)"],[1,";"],[0,"\n       "]],"start1":2202,"start2":2202,"length1":16,"length2":17},{"diffs":[[0,"\n               "],[1," timeDown = 0;"],[0," // Сбрасываем т"]],"start1":2229,"start2":2229,"length1":32,"length2":46},{"diffs":[[0,"мер\n"],[-1,"                timeDown = 0\n"],[0,"    "]],"start1":2277,"start2":2277,"length1":37,"length2":8},{"diffs":[[0,"se {\n           "],[1," timeDown = 0;"],[0," // Сбрасываем, "]],"start1":2307,"start2":2307,"length1":32,"length2":46},{"diffs":[[0,"ено\n"],[-1,"            timeDown = 0\n"],[0,"    "]],"start1":2378,"start2":2378,"length1":33,"length2":8},{"diffs":[[0,"онено\n        }\n"],[1,"\n"],[0,"        // Прове"]],"start1":2376,"start2":2376,"length1":32,"length2":33},{"diffs":[[0,"\n           "],[1," timeUp += 100;"],[0," // Увеличив"]],"start1":2474,"start2":2474,"length1":24,"length2":39},{"diffs":[[0,"мер\n"],[-1,"            timeUp += 100\n"],[0,"    "]],"start1":2520,"start2":2520,"length1":34,"length2":8},{"diffs":[[0,") {\n"],[-1,"                // Иногда TRAFFIC + Roll\n                if (Math.random() < 0.3) {\n                    basic.showString(\"TRAFFIC\")\n                }\n"],[0,"    "]],"start1":2554,"start2":2554,"length1":158,"length2":8},{"diffs":[[0,"et i"],[-1,"ndex"],[0," = 0; i"],[-1,"ndex"],[0," < 3; i"],[-1,"ndex"],[0,"++) "]],"start1":2625,"start2":2625,"length1":34,"length2":22},{"diffs":[[0,"one("],[-1,"196"],[1,"Note.G3"],[0,", mu"]],"start1":2680,"start2":2680,"length1":11,"length2":15},{"diffs":[[0,"n.Half))"],[1,";"],[0,"\n       "]],"start1":2715,"start2":2715,"length1":16,"length2":17},{"diffs":[[0,"use(200)"],[1,";"],[0,"\n       "]],"start1":2753,"start2":2753,"length1":16,"length2":17},{"diffs":[[0,"\n               "],[1," timeUp = 0;"],[0," // Сбрасываем т"]],"start1":2780,"start2":2780,"length1":32,"length2":44},{"diffs":[[0,"мер\n"],[-1,"                timeUp = 0\n"],[0,"    "]],"start1":2826,"start2":2826,"length1":35,"length2":8},{"diffs":[[0,"se {\n           "],[1," timeUp = 0;"],[0," // Сбрасываем, "]],"start1":2856,"start2":2856,"length1":32,"length2":44},{"diffs":[[0,"    "],[-1,"    timeUp = 0\n        }\n        // Проверяем долгий крен или тангаж\n        if (Math.abs(roll) > 30 || Math.abs(pitch) > 30) {\n            timeTurn += 100\n            if (timeTurn >= 10000) {\n                // Если наклон держится больше 10 секунд\n                basic.showString(\"SPEED\")\n                // Сбрасываем таймер\n                timeTurn = 0\n            }\n        } else {\n            // Сбрасываем, если угол меньше 30°\n            timeTurn = 0\n        }\n    }\n    // Задержка цикла\n    basic.pause(100)"],[1,"}\n    }\n\n    basic.pause(100); // Задержка цикла"],[0,"\n})"],[1,";"],[0,"\n"]],"start1":2933,"start2":2933,"length1":528,"length2":57}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"block"],[1,"t"],[0,"sprj\"\n}\n"]],"start1":267,"start2":267,"length1":21,"length2":17}]}]},{"timestamp":1733506583194,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[0,"let "],[-1,"timeDown = 0; //"],[1,"pitch = 0\nlet roll = 0\nlet timeDown = 0\nlet timeUp = 0\nlet timeTurn = 0\nlet centerRow = 0\nlet centerColumn = 0\nlet row = 0\n/**\n *"],[0," Таймер "]],"start1":0,"start2":0,"length1":28,"length2":141},{"diffs":[[0,"низ\n"],[-1,"let timeUp = 0;   //"],[1," */\n/**\n *"],[0," Тай"]],"start1":154,"start2":154,"length1":28,"length2":18},{"diffs":[[0,"ерх\n"],[-1,"let timeTurn = 0; "],[1," */\n// Реакция на встряхивание\ninput.onGesture(Gesture.Shake, function () {\n    basic.showString(\"7600\")\n    for (let index = 0; index < 3; index++) {\n        music.playTone(880, music.beat(BeatFraction.Half))\n        basic.pause(100)\n    }\n})\n"],[0,"// Т"]],"start1":190,"start2":190,"length1":26,"length2":252},{"diffs":[[0,"тангажа\n"],[-1,"\n"],[0,"basic.fo"]],"start1":470,"start2":470,"length1":17,"length2":16},{"diffs":[[0,"ена\n    "],[-1,"let"],[1,"// Вперед/назад\n   "],[0," pitch ="]],"start1":539,"start2":539,"length1":19,"length2":35},{"diffs":[[0,"tch)"],[-1,";"],[1,"\n   "],[0," // В"],[-1,"перед/назад\n    let"],[1,"лево/вправо\n   "],[0," rol"]],"start1":601,"start2":601,"length1":33,"length2":32},{"diffs":[[0,"oll)"],[-1,";  // Влево/вправо\n"],[0,"\n   "]],"start1":662,"start2":662,"length1":27,"length2":8},{"diffs":[[0,"Screen()"],[-1,";"],[0,"\n       "]],"start1":843,"start2":843,"length1":17,"length2":16},{"diffs":[[0," (let x = 0; x <"],[-1," 5"],[1,"= 4"],[0,"; x++) {\n       "]],"start1":863,"start2":863,"length1":34,"length2":35},{"diffs":[[0,"    "],[-1," "],[-1,"led.plot(x, 2);"],[0," // "]],"start1":898,"start2":898,"length1":24,"length2":8},{"diffs":[[0," центру\n"],[1,"            led.plot(x, 2)\n"],[0,"        "]],"start1":914,"start2":914,"length1":16,"length2":43},{"diffs":[[0,"timeDown = 0"],[-1,";"],[0,"\n        tim"]],"start1":997,"start2":997,"length1":25,"length2":24},{"diffs":[[0,"  timeUp = 0"],[-1,";"],[0,"\n        tim"]],"start1":1016,"start2":1016,"length1":25,"length2":24},{"diffs":[[0,"Turn = 0"],[-1,";"],[0,"\n    } e"]],"start1":1041,"start2":1041,"length1":17,"length2":16},{"diffs":[[0,"Screen()"],[-1,";\n"],[0,"\n       "]],"start1":1107,"start2":1107,"length1":18,"length2":16},{"diffs":[[0,"нию\n        "],[-1,"let "],[0,"centerRow = "]],"start1":1148,"start2":1148,"length1":28,"length2":24},{"diffs":[[0,", -90, 90, 0, 4)"],[-1,";"],[0,"\n        let cen"]],"start1":1186,"start2":1186,"length1":33,"length2":32},{"diffs":[[0,"        "],[-1,"let "],[0,"centerCo"]],"start1":1203,"start2":1203,"length1":20,"length2":16},{"diffs":[[0,"0, 0, 4)"],[-1,";"],[0,"\n       "]],"start1":1247,"start2":1247,"length1":17,"length2":16},{"diffs":[[0,"rRow));\n"],[-1,"        "],[0,"centerCo"]],"start1":1309,"start2":1309,"length1":24,"length2":16},{"diffs":[[0,"lumn));\n"],[-1,"        "],[0,"for (let"]],"start1":1368,"start2":1368,"length1":24,"length2":16},{"diffs":[[0,"et x"],[1,"2"],[0," = 0; x"],[1,"2"],[0," <"],[-1," 5"],[1,"= 4"],[0,"; x"],[1,"2"],[0,"++) "]],"start1":1382,"start2":1382,"length1":22,"length2":26},{"diffs":[[0,"        "],[-1,"let "],[0,"row = ce"]],"start1":1414,"start2":1414,"length1":20,"length2":16},{"diffs":[[0,"Row + (x"],[1,"2"],[0," - 2) * "]],"start1":1434,"start2":1434,"length1":16,"length2":17},{"diffs":[[0,"- 2) / 2"],[-1,";"],[0,"\n       "]],"start1":1465,"start2":1465,"length1":17,"length2":16},{"diffs":[[0,"(row));\n"],[-1,"            "],[0,"led.plot"]],"start1":1519,"start2":1519,"length1":28,"length2":16},{"diffs":[[0,"ot(x"],[1,"2"],[0,", row)"],[-1,";"],[0,"\n   "]],"start1":1533,"start2":1533,"length1":15,"length2":15},{"diffs":[[0," row)\n        }\n"],[-1,"\n"],[0,"        // Прове"]],"start1":1539,"start2":1539,"length1":33,"length2":32},{"diffs":[[0,"    "],[-1," timeDown += 100;"],[0," // "]],"start1":1641,"start2":1641,"length1":25,"length2":8},{"diffs":[[0,"личиваем таймер\n"],[1,"            timeDown += 100\n"],[0,"            if ("]],"start1":1652,"start2":1652,"length1":32,"length2":60},{"diffs":[[0,"              //"],[1," Иногда"],[0," TRAFFIC + Pull "]],"start1":1734,"start2":1734,"length1":32,"length2":39},{"diffs":[[0,"RAFFIC + Pull Up"],[-1," сигнал"],[0,"\n               "]],"start1":1759,"start2":1759,"length1":39,"length2":32},{"diffs":[[0,"    "],[-1,"for (let i = 0; i < 2; i++) { // TRAFFIC сигнал\n                        music.playTone(Note.B4, music.beat(BeatFraction.Quarter));\n                        basic.pause(100);\n                    }\n                }"],[1,"basic.showString(\"TRAFFIC\")\n                }\n                // Проигрываем \"Pull Up\" сигнал"],[0,"\n   "]],"start1":1835,"start2":1835,"length1":220,"length2":101},{"diffs":[[0,"et i"],[1,"ndex"],[0," = 0; i"],[1,"ndex"],[0," < 3; i"],[1,"ndex"],[0,"++) {"],[-1," // Pull Up сигнал"],[0,"\n   "]],"start1":1955,"start2":1955,"length1":45,"length2":39},{"diffs":[[0,"one("],[-1,"Note.C5"],[1,"523"],[0,", mu"]],"start1":2022,"start2":2022,"length1":15,"length2":11},{"diffs":[[0,"action.Quarter))"],[-1,";"],[0,"\n               "]],"start1":2048,"start2":2048,"length1":33,"length2":32},{"diffs":[[0,"basic.pause(100)"],[-1,";"],[0,"\n               "]],"start1":2085,"start2":2085,"length1":33,"length2":32},{"diffs":[[0,"            "],[-1," timeDown = 0;"],[0," // Сбрасыва"]],"start1":2123,"start2":2123,"length1":38,"length2":24},{"diffs":[[0,"расываем таймер\n"],[1,"                timeDown = 0\n"],[0,"            }\n  "]],"start1":2141,"start2":2141,"length1":32,"length2":61},{"diffs":[[0,"    "],[-1," timeDown = 0;"],[0," // "]],"start1":2224,"start2":2224,"length1":22,"length2":8},{"diffs":[[0,"во не наклонено\n"],[1,"            timeDown = 0\n"],[0,"        }\n\n     "]],"start1":2257,"start2":2257,"length1":32,"length2":57},{"diffs":[[0,"n = 0\n        }\n"],[-1,"\n"],[0,"        // Прове"]],"start1":2292,"start2":2292,"length1":33,"length2":32},{"diffs":[[0,"    "],[-1," timeUp += 100;"],[0," // "]],"start1":2397,"start2":2397,"length1":23,"length2":8},{"diffs":[[0,"личиваем таймер\n"],[1,"            timeUp += 100\n"],[0,"            if ("]],"start1":2408,"start2":2408,"length1":32,"length2":58},{"diffs":[[0,"      //"],[1," Иногда"],[0," TRAFFIC"]],"start1":2494,"start2":2494,"length1":16,"length2":23},{"diffs":[[0,"AFFIC + Roll"],[-1," сигнал"],[0,"\n           "]],"start1":2512,"start2":2512,"length1":31,"length2":24},{"diffs":[[0,"    "],[-1,"for (let i = 0; i < 2; i++) { // TRAFFIC сигнал\n                        music.playTone(Note.B4, music.beat(BeatFraction.Quarter));\n                        basic.pause(100);\n                    }\n                }"],[1,"basic.showString(\"TRAFFIC\")\n                }\n                // Проигрываем \"Roll\" сигнал"],[0,"\n   "]],"start1":2584,"start2":2584,"length1":220,"length2":98},{"diffs":[[0,"et i"],[1,"ndex"],[0," = 0; i"],[1,"ndex"],[0," < 3; i"],[1,"ndex"],[0,"++) {"],[-1," // Roll сигнал"],[0,"\n   "]],"start1":2701,"start2":2701,"length1":42,"length2":39},{"diffs":[[0,"one("],[-1,"Note.G3"],[1,"196"],[0,", mu"]],"start1":2768,"start2":2768,"length1":15,"length2":11},{"diffs":[[0,"tFraction.Half))"],[-1,";"],[0,"\n               "]],"start1":2791,"start2":2791,"length1":33,"length2":32},{"diffs":[[0,"use(200)"],[-1,";"],[0,"\n       "]],"start1":2836,"start2":2836,"length1":17,"length2":16},{"diffs":[[0,"            "],[-1," timeUp = 0;"],[0," // Сбрасыва"]],"start1":2866,"start2":2866,"length1":36,"length2":24},{"diffs":[[0,"расываем таймер\n"],[1,"                timeUp = 0\n"],[0,"            }\n  "]],"start1":2884,"start2":2884,"length1":32,"length2":59},{"diffs":[[0,"    "],[-1," timeUp = 0;"],[0," // "]],"start1":2965,"start2":2965,"length1":20,"length2":8},{"diffs":[[0,"во не наклонено\n"],[1,"            timeUp = 0\n"],[0,"        }\n\n     "]],"start1":2998,"start2":2998,"length1":32,"length2":55},{"diffs":[[0,"0\n        }\n"],[-1,"\n"],[0,"        // П"]],"start1":3035,"start2":3035,"length1":25,"length2":24},{"diffs":[[0,"n += 100"],[-1,";"],[0,"\n       "]],"start1":3169,"start2":3169,"length1":17,"length2":16},{"diffs":[[0,"10000) {"],[1,"\n               "],[0," // Если"]],"start1":3206,"start2":3206,"length1":16,"length2":32},{"diffs":[[0,"    "],[-1,"for (let i = 0; i < 3; i++) { // SPEED сигнал\n                    music.playTone(Note.A4, music.beat(BeatFraction.Quarter));\n                    basic.pause(100);\n                }"],[1,"basic.showString(\"SPEED\")\n                // Сбрасываем таймер"],[0,"\n   "]],"start1":3284,"start2":3284,"length1":188,"length2":70},{"diffs":[[0," = 0"],[-1,"; // Сбрасываем таймер"],[0,"\n   "]],"start1":3375,"start2":3375,"length1":30,"length2":8},{"diffs":[[0,"    "],[-1," timeTurn = 0;"],[0," // "]],"start1":3418,"start2":3418,"length1":22,"length2":8},{"diffs":[[0,"    "],[-1,"}\n"],[0,"    "],[-1,"}\n\n    basic.pause(100); // Задержка цикла\n});\n\n// Реакция на встряхивание\ninput.onGesture(Gesture.Shake, function () {\n    for (let i = 0; i < 3; i++) { // 7600 сигнал\n        music.playTone(Note.A5, music.beat(BeatFraction.Half));\n    "],[1,"timeTurn = 0\n        }\n    }\n    // Задержка цикла\n"],[0,"    "]],"start1":3463,"start2":3463,"length1":251,"length2":63},{"diffs":[[0,"100)"],[-1,";\n    }"],[0,"\n})"],[-1,";"],[0,"\n"]],"start1":3538,"start2":3538,"length1":16,"length2":8}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0,"itor\": \""],[-1,"t"],[1,"block"],[0,"sprj\"\n}\n"]],"start1":267,"start2":267,"length1":17,"length2":21}]}]},{"timestamp":1733507136692,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"//  __\n//   /\n//\n//\n\n\ninput.onButtonPressed(Button.A, function () {\n    // Сигнал для PAN, PAN\n    for (let i = 0; i < 2; i++) {\n        music.playTone(Note.E5, music.beat(BeatFraction.Half));\n        basic.pause(200);\n    }\n});\n\ninput.onButtonPressed(Button.B, function () {\n    // Сигнал для MAYDAY, MAYDAY\n    for (let i = 0; i < 2; i++) {\n        music.playTone(Note.C5, music.beat(BeatFraction.Whole));\n        music.playTone(Note.G4, music.beat(BeatFraction.Whole));\n        basic.pause(400);\n    }\n});\n\ninput.onButtonPressed(Button.AB, function () {\n    // Сигнал для SÉCURITÉ\n    music.playTone(Note.G3, music.beat(BeatFraction.Double));\n    basic.pause(400);\n});\n\n"],[0,"let "]],"start1":0,"start2":0,"length1":677,"length2":4},{"diffs":[[0,"на вверх"],[1,"\nlet timeTurn = 0; // Таймер для долгого крена или тангажа"],[0,"\n\nbasic."]],"start1":82,"start2":82,"length1":16,"length2":74},{"diffs":[[0,"timeUp = 0;\n"],[1,"        timeTurn = 0;\n"],[0,"    } else {"]],"start1":684,"start2":684,"length1":24,"length2":46},{"diffs":[[0," // "],[-1,"Проигрываем \""],[1,"TRAFFIC + "],[0,"Pull Up"],[-1,"\""],[0," сигнал\n"],[1,"                if (Math.random() < 0.3) {\n                    for (let i = 0; i < 2; i++) { // TRAFFIC сигнал\n                        music.playTone(Note.B4, music.beat(BeatFraction.Quarter));\n                        basic.pause(100);\n                    }\n                }\n"],[0,"    "]],"start1":1445,"start2":1445,"length1":37,"length2":309},{"diffs":[[0,"0; i < 3; i++) {"],[1," // Pull Up сигнал"],[0,"\n               "]],"start1":1779,"start2":1779,"length1":32,"length2":50},{"diffs":[[0," // "],[-1,"Проигрываем \"Roll\" сигнал"],[1,"TRAFFIC + Roll сигнал\n                if (Math.random() < 0.3) {\n                    for (let i = 0; i < 2; i++) { // TRAFFIC сигнал\n                        music.playTone(Note.B4, music.beat(BeatFraction.Quarter));\n                        basic.pause(100);\n                    }\n                }"],[0,"\n   "]],"start1":2292,"start2":2292,"length1":33,"length2":305},{"diffs":[[0," < 3; i++) {"],[1," // Roll сигнал"],[0,"\n           "]],"start1":2627,"start2":2627,"length1":24,"length2":39},{"diffs":[[0,"  }\n"],[-1,"    }\n\n    basic.pause(100); // Задержка цикла\n});"],[1,"\n        // Проверяем долгий крен или тангаж\n        if (Math.abs(roll) > 30 || Math.abs(pitch) > 30) {\n            timeTurn += 100;\n            if (timeTurn >= 10000) { // Если наклон держится больше 10 секунд\n                for (let i = 0; i < 3; i++) { // SPEED сигнал\n                    music.playTone(Note.A4, music.beat(BeatFraction.Quarter));\n                    basic.pause(100);\n                }\n                timeTurn = 0; // Сбрасываем таймер\n            }\n        } else {\n            timeTurn = 0; // Сбрасываем, если угол меньше 30°\n        }\n    }\n\n    basic.pause(100); // Задержка цикла\n});\n\n// Реакция на встряхивание\ninput.onGesture(Gesture.Shake, function () {\n    for (let i = 0; i < 3; i++) { // 7600 сигнал\n        music.playTone(Note.A5, music.beat(BeatFraction.Half));\n        basic.pause(100);\n    }\n});\n"]],"start1":2941,"start2":2941,"length1":54,"length2":839}]}]},{"timestamp":1733507736364,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"    ____     ____         __\n  / ___ | / ___|       / _ | _ __    ___    ___\n  \\___ \\  | | _ | | _ | '__|  / _ \\  / _ \\\n     ___) | | |_| |      |  _| | |    |  __/ |  __/\n| ____ /   \\____ |      | _ |   | _ |     \\___ |  \\___ |\n\n"],[1,"//  __\n//   /\n//\n//"],[0,"\n\n\ni"]],"start1":0,"start2":0,"length1":234,"length2":23}]}]},{"timestamp":1733508333823,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.ts","patch":[{"diffs":[[-1,"//"],[0,"    "],[-1,"  sSSs    sSSSSs\n//      d %% SP   d %%%% SP\n//      d % S'    d%S'\n//      S %| S % S\n//      S & S     S & S\n//      Y & Ss    S & S\n//          `S&&S   S&S       \n//        `S * S  S & S sSSs\n//      l * S  S * b`S%%  \n//        .S*P  S*S   S%  \n//      sSS*S    SS_sSSS  \n//      YSS'      Y~YSSY  \n//                                          sg free \n//                                          tg - https://t.me/HelloThisIsCapybara\n//  sSSs   .S_sSSs      sSSs    sSSs  \n// d%%SP  .SS~YS%%b    d%%SP   d%%SP  \n//d%S'    S%S   `S % b  d % S'    d%S'\n//S % S     S % S    S % S  S % S     S % S\n//S & S     S % S    d * S  S & S     S & S\n//S & S_Ss  S & S.S * S  S & S_Ss  S & S_Ss\n//S & S~SP  S & S_sdSSS   S & S~SP  S & S~SP\n//S & S     S & S~YSY % b   S & S     S & S\n//S * b     S * S   `S%b  S*b     S*b\n//S*S     S*S    S%S  S*S.    S*S.\n//S*S     S*S    S&S   SSSbs   SSSbs\n//S*S     S*S    SSS    YSSP    YSSP\n//SP      SP\n//Y       Y\n\n"],[1,"____     ____         __\n  / ___ | / ___|       / _ | _ __    ___    ___\n  \\___ \\  | | _ | | _ | '__|  / _ \\  / _ \\\n     ___) | | |_| |      |  _| | |    |  __/ |  __/\n| ____ /   \\____ |      | _ |   | _ |     \\___ |  \\___ |"],[0,"\n\n\n\n"]],"start1":0,"start2":0,"length1":959,"length2":232},{"diffs":[[0,"\n});"],[-1,"\n\n//      Hello From Ukraine!"]],"start1":3218,"start2":3218,"length1":33,"length2":4}]}]},{"timestamp":1733508855472,"editorVersion":"7.0.51","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"ent "],[-1,"id=\"0@f|H+fyxLlfEGPl~w_g\" x=\"1874\" y=\"20\" w=\"230\" h=\"120\">\nТаймер для"],[1,"x=\"1874.46875\" y=\"20\" w=\"230\" h=\"120\">\nТаймер для наклона вниз\n</comment><comment x=\"2149.46875\" y=\"20\" w=\"240\" h=\"120\">\nТаймер для наклона вверх\n</comment><block type=\"device_forever\" x=\"20\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Таймер для долгого крена или тангажа</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field><comment pinned=\"false\" h=\"80\" w=\"160\">Получаем углы тангажа и крена\nВперед/назад</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Pitch</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field><comment pinned=\"false\" h=\"80\" w=\"160\">Влево/вправо</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем вертикальное положение</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Устройство ровное, отображаем горизонтальную линию</comment><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"oy-#AU%6JsT9asrmCF}}\">x</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">4</field></block></value><statement name=\"DO\"><block type=\"device_plot\"><comment pinned=\"false\" h=\"80\" w=\"160\">Линия по центру</comment><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oy-#AU%6JsT9asrmCF}}\">x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">2</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймеры</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Очищаем экран</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</field><comment pinned=\"false\" h=\"80\" w=\"160\">Рисуем наклоненную линию</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"centerRow = Math.clamp(0, 4, Math.round(centerRow));\" numlines=\"1\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"centerColumn = Math.clamp(0, 4, Math.round(centerColumn));\" numlines=\"1\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">4</field></block></value><statement name=\"DO\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k#MGtm*$a%=VB,nGuob\">row</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"row = Math.clamp(0, 4, Math.round(row));\" numlines=\"1\"></mutation><next><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k#MGtm*$a%=VB,nGuob\">row</field></block></value></block></next></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем"],[0," наклон"],[-1,"а"],[0," вниз"],[-1,"\n</comment><comment id=\"%J%!,S~h5P8_6_pW5-ar\" x=\"2149\" y=\"20\" w=\"240\" h=\"120\">\nТаймер для наклона вверх\n</comment"],[1," (тангаж больше 45°)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Увеличиваем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Иногда TRAFFIC + Pull Up</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">Math.random()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.3</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRAFFIC</field></shadow></value></block></statement><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Проигрываем \"Pull Up\" сигнал</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">523</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Quarter</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если устройство не наклонено</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем наклон вверх (тангаж меньше -45°)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-45</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Увеличиваем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Иногда TRAFFIC + Roll</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">Math.random()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.3</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRAFFIC</field></shadow></value></block></statement><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Проигрываем \"Roll\" сигнал</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">196</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Half</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если устройство не наклонено</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем долгий крен или тангаж</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Если наклон держится больше 10 секунд</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">SPEED</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если угол меньше 30°</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Задержка цикла</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"device_gesture_event\" x=\"1225\" y=\"20\"><field name=\"NAME\">Gesture.Shake</field><comment pinned=\"false\" h=\"80\" w=\"160\">Реакция на встряхивание</comment><statement name=\"HANDLER\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">7600</field></shadow></value><next><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">880</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Half</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement></block></next></block></statement></block"],[0,"></x"]],"start1":611,"start2":611,"length1":203,"length2":19522}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":247,"start2":247,"length1":52,"length2":8}]},{"type":"added","filename":"test.ts","value":"// здесь помещаются тесты; они не будут скомпилированы, пока пакет используется в качестве расширения.\n"}]}],"snapshots":[{"timestamp":1733505265181,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"Primary Flight Display (PFD)\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1733507066863,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</variable><variable id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</variable><variable id=\"oy-#AU%6JsT9asrmCF}}\">x</variable><variable id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</variable><variable id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</variable><variable id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</variable><variable id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</variable><variable id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</variable><variable id=\"s5sl{zqtQ$vemt/G6ud4\">x2</variable><variable id=\";k#MGtm*$a%=VB,nGuob\">row</variable></variables><comment x=\"1874.46875\" y=\"20\" w=\"230\" h=\"120\">\nТаймер для наклона вниз\n</comment><comment x=\"2149.46875\" y=\"20\" w=\"240\" h=\"120\">\nТаймер для наклона вверх\n</comment><block type=\"device_forever\" x=\"20\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Таймер для долгого крена или тангажа</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field><comment pinned=\"false\" h=\"80\" w=\"160\">Получаем углы тангажа и крена\nВперед/назад</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Pitch</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field><comment pinned=\"false\" h=\"80\" w=\"160\">Влево/вправо</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем вертикальное положение</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Устройство ровное, отображаем горизонтальную линию</comment><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"oy-#AU%6JsT9asrmCF}}\">x</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">4</field></block></value><statement name=\"DO\"><block type=\"device_plot\"><comment pinned=\"false\" h=\"80\" w=\"160\">Линия по центру</comment><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oy-#AU%6JsT9asrmCF}}\">x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">2</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймеры</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Очищаем экран</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</field><comment pinned=\"false\" h=\"80\" w=\"160\">Рисуем наклоненную линию</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"centerRow = Math.clamp(0, 4, Math.round(centerRow));\" numlines=\"1\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"centerColumn = Math.clamp(0, 4, Math.round(centerColumn));\" numlines=\"1\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">4</field></block></value><statement name=\"DO\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k#MGtm*$a%=VB,nGuob\">row</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"row = Math.clamp(0, 4, Math.round(row));\" numlines=\"1\"></mutation><next><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k#MGtm*$a%=VB,nGuob\">row</field></block></value></block></next></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем наклон вниз (тангаж больше 45°)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Увеличиваем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Иногда TRAFFIC + Pull Up</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">Math.random()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.3</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRAFFIC</field></shadow></value></block></statement><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Проигрываем \"Pull Up\" сигнал</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">523</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Quarter</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если устройство не наклонено</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем наклон вверх (тангаж меньше -45°)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-45</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Увеличиваем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Иногда TRAFFIC + Roll</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">Math.random()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.3</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRAFFIC</field></shadow></value></block></statement><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Проигрываем \"Roll\" сигнал</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">196</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Half</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если устройство не наклонено</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем долгий крен или тангаж</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Если наклон держится больше 10 секунд</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">SPEED</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если угол меньше 30°</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Задержка цикла</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"device_gesture_event\" x=\"1225\" y=\"20\"><field name=\"NAME\">Gesture.Shake</field><comment pinned=\"false\" h=\"80\" w=\"160\">Реакция на встряхивание</comment><statement name=\"HANDLER\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">7600</field></shadow></value><next><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">880</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Half</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement></block></next></block></statement></block></xml>","main.ts":"let pitch = 0\nlet roll = 0\nlet timeDown = 0\nlet timeUp = 0\nlet timeTurn = 0\nlet centerRow = 0\nlet centerColumn = 0\nlet row = 0\n/**\n * Таймер для наклона вниз\n */\n/**\n * Таймер для наклона вверх\n */\n// Реакция на встряхивание\ninput.onGesture(Gesture.Shake, function () {\n    basic.showString(\"7600\")\n    for (let index = 0; index < 3; index++) {\n        music.playTone(880, music.beat(BeatFraction.Half))\n        basic.pause(100)\n    }\n})\n// Таймер для долгого крена или тангажа\nbasic.forever(function () {\n    // Получаем углы тангажа и крена\n    // Вперед/назад\n    pitch = input.rotation(Rotation.Pitch)\n    // Влево/вправо\n    roll = input.rotation(Rotation.Roll)\n    // Проверяем вертикальное положение\n    if (Math.abs(pitch) < 10 && Math.abs(roll) < 10) {\n        // Устройство ровное, отображаем горизонтальную линию\n        basic.clearScreen()\n        for (let x = 0; x <= 4; x++) {\n            // Линия по центру\n            led.plot(x, 2)\n        }\n        // Сбрасываем таймеры\n        timeDown = 0\n        timeUp = 0\n        timeTurn = 0\n    } else {\n        // Очищаем экран\n        basic.clearScreen()\n        // Рисуем наклоненную линию\n        centerRow = Math.map(pitch, -90, 90, 0, 4)\n        centerColumn = Math.map(roll, -90, 90, 0, 4)\n        centerRow = Math.clamp(0, 4, Math.round(centerRow));\ncenterColumn = Math.clamp(0, 4, Math.round(centerColumn));\nfor (let x2 = 0; x2 <= 4; x2++) {\n            row = centerRow + (x2 - 2) * (centerColumn - 2) / 2\n            row = Math.clamp(0, 4, Math.round(row));\nled.plot(x2, row)\n        }\n        // Проверяем наклон вниз (тангаж больше 45°)\n        if (pitch > 45) {\n            // Увеличиваем таймер\n            timeDown += 100\n            if (timeDown >= 5000) {\n                // Иногда TRAFFIC + Pull Up\n                if (Math.random() < 0.3) {\n                    basic.showString(\"TRAFFIC\")\n                }\n                // Проигрываем \"Pull Up\" сигнал\n                for (let index = 0; index < 3; index++) {\n                    music.playTone(523, music.beat(BeatFraction.Quarter))\n                    basic.pause(100)\n                }\n                // Сбрасываем таймер\n                timeDown = 0\n            }\n        } else {\n            // Сбрасываем, если устройство не наклонено\n            timeDown = 0\n        }\n        // Проверяем наклон вверх (тангаж меньше -45°)\n        if (pitch < -45) {\n            // Увеличиваем таймер\n            timeUp += 100\n            if (timeUp >= 5000) {\n                // Иногда TRAFFIC + Roll\n                if (Math.random() < 0.3) {\n                    basic.showString(\"TRAFFIC\")\n                }\n                // Проигрываем \"Roll\" сигнал\n                for (let index = 0; index < 3; index++) {\n                    music.playTone(196, music.beat(BeatFraction.Half))\n                    basic.pause(200)\n                }\n                // Сбрасываем таймер\n                timeUp = 0\n            }\n        } else {\n            // Сбрасываем, если устройство не наклонено\n            timeUp = 0\n        }\n        // Проверяем долгий крен или тангаж\n        if (Math.abs(roll) > 30 || Math.abs(pitch) > 30) {\n            timeTurn += 100\n            if (timeTurn >= 10000) {\n                // Если наклон держится больше 10 секунд\n                basic.showString(\"SPEED\")\n                // Сбрасываем таймер\n                timeTurn = 0\n            }\n        } else {\n            // Сбрасываем, если угол меньше 30°\n            timeTurn = 0\n        }\n    }\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"Primary Flight Display (PFD)\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1733509068365,"editorVersion":"7.0.51","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</variable><variable id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</variable><variable id=\"oy-#AU%6JsT9asrmCF}}\">x</variable><variable id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</variable><variable id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</variable><variable id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</variable><variable id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</variable><variable id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</variable><variable id=\"s5sl{zqtQ$vemt/G6ud4\">x2</variable><variable id=\";k#MGtm*$a%=VB,nGuob\">row</variable></variables><comment x=\"1874.46875\" y=\"20\" w=\"230\" h=\"120\">\nТаймер для наклона вниз\n</comment><comment x=\"2149.46875\" y=\"20\" w=\"240\" h=\"120\">\nТаймер для наклона вверх\n</comment><block type=\"device_forever\" x=\"20\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Таймер для долгого крена или тангажа</comment><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field><comment pinned=\"false\" h=\"80\" w=\"160\">Получаем углы тангажа и крена\nВперед/назад</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Pitch</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field><comment pinned=\"false\" h=\"80\" w=\"160\">Влево/вправо</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_get_rotation\"><field name=\"NAME\">Rotation.Roll</field></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем вертикальное положение</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Устройство ровное, отображаем горизонтальную линию</comment><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"oy-#AU%6JsT9asrmCF}}\">x</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">4</field></block></value><statement name=\"DO\"><block type=\"device_plot\"><comment pinned=\"false\" h=\"80\" w=\"160\">Линия по центру</comment><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"oy-#AU%6JsT9asrmCF}}\">x</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">2</field></shadow></value></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймеры</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></next></block></next></block></statement><statement name=\"ELSE\"><block type=\"device_clear_display\"><comment pinned=\"false\" h=\"80\" w=\"160\">Очищаем экран</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</field><comment pinned=\"false\" h=\"80\" w=\"160\">Рисуем наклоненную линию</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_map\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value><value name=\"fromLow\"><shadow type=\"math_number\"><field name=\"NUM\">-90</field></shadow></value><value name=\"fromHigh\"><shadow type=\"math_number\"><field name=\"NUM\">90</field></shadow></value><value name=\"toLow\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"toHigh\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"centerRow = Math.clamp(0, 4, Math.round(centerRow));\" numlines=\"1\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"centerColumn = Math.clamp(0, 4, Math.round(centerColumn));\" numlines=\"1\"></mutation><next><block type=\"pxt_controls_for\"><value name=\"VAR\"><block type=\"variables_get_reporter\"><mutation duplicateondrag=\"true\"></mutation><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"TO\"><shadow type=\"math_whole_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_number\"><field name=\"NUM\">4</field></block></value><statement name=\"DO\"><block type=\"variables_set\"><field name=\"VAR\" id=\";k#MGtm*$a%=VB,nGuob\">row</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"8WFmAd{W*G.iaH@o.]E[\">centerRow</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">DIVIDE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"jCg~{+?PsD0;j=,JSnp+\">centerColumn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value></block></value></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"row = Math.clamp(0, 4, Math.round(row));\" numlines=\"1\"></mutation><next><block type=\"device_plot\"><value name=\"x\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"s5sl{zqtQ$vemt/G6ud4\">x2</field></block></value><value name=\"y\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\";k#MGtm*$a%=VB,nGuob\">row</field></block></value></block></next></block></next></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем наклон вниз (тангаж больше 45°)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">45</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Увеличиваем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Иногда TRAFFIC + Pull Up</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">Math.random()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.3</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRAFFIC</field></shadow></value></block></statement><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Проигрываем \"Pull Up\" сигнал</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">523</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Quarter</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"l8!0B%QBxTNOl9TQSi]p\">timeDown</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если устройство не наклонено</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем наклон вверх (тангаж меньше -45°)</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-45</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Увеличиваем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><data>{\"commentRefs\":[],\"fieldData\":{}}</data><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">5000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">Иногда TRAFFIC + Roll</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">Math.random()</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0.3</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">TRAFFIC</field></shadow></value></block></statement><next><block type=\"controls_repeat_ext\"><comment pinned=\"false\" h=\"80\" w=\"160\">Проигрываем \"Roll\" сигнал</comment><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">196</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Half</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">200</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"J$RGv]F6=wE_6k@JRj0M\">timeUp</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если устройство не наклонено</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Проверяем долгий крен или тангаж</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3qg!tQ(|FWn8Eclv#BaO\">roll</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_op3\"><value name=\"x\"><block type=\"variables_get\"><field name=\"VAR\" id=\"}ZkMuG~iqG`2]fjC/7#z\">pitch</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">30</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">10000</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><comment pinned=\"false\" h=\"80\" w=\"160\">Если наклон держится больше 10 секунд</comment><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">SPEED</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем таймер</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"mM`Q5P%)L]-tv9spdE08\">timeTurn</field><comment pinned=\"false\" h=\"80\" w=\"160\">Сбрасываем, если угол меньше 30°</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement><next><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">Задержка цикла</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type=\"device_gesture_event\" x=\"1225\" y=\"20\"><field name=\"NAME\">Gesture.Shake</field><comment pinned=\"false\" h=\"80\" w=\"160\">Реакция на встряхивание</comment><statement name=\"HANDLER\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">7600</field></shadow></value><next><block type=\"controls_repeat_ext\"><value name=\"TIMES\"><shadow type=\"math_whole_number\"><field name=\"NUM\">3</field></shadow></value><statement name=\"DO\"><block type=\"device_play_note\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">880</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Half</field></shadow></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement></block></next></block></statement></block></xml>","main.ts":"//      sSSs    sSSSSs\n//      d %% SP   d %%%% SP\n//      d % S'    d%S'\n//      S %| S % S\n//      S & S     S & S\n//      Y & Ss    S & S\n//          `S&&S   S&S       \n//        `S * S  S & S sSSs\n//      l * S  S * b`S%%  \n//        .S*P  S*S   S%  \n//      sSS*S    SS_sSSS  \n//      YSS'      Y~YSSY  \n//                                          sg free \n//                                          tg - https://t.me/HelloThisIsCapybara\n//  sSSs   .S_sSSs      sSSs    sSSs  \n// d%%SP  .SS~YS%%b    d%%SP   d%%SP  \n//d%S'    S%S   `S % b  d % S'    d%S'\n//S % S     S % S    S % S  S % S     S % S\n//S & S     S % S    d * S  S & S     S & S\n//S & S_Ss  S & S.S * S  S & S_Ss  S & S_Ss\n//S & S~SP  S & S_sdSSS   S & S~SP  S & S~SP\n//S & S     S & S~YSY % b   S & S     S & S\n//S * b     S * S   `S%b  S*b     S*b\n//S*S     S*S    S%S  S*S.    S*S.\n//S*S     S*S    S&S   SSSbs   SSSbs\n//S*S     S*S    SSS    YSSP    YSSP\n//SP      SP\n//Y       Y\n\n\n\n\n\n\ninput.onButtonPressed(Button.A, function () {\n    // Сигнал для PAN, PAN\n    for (let i = 0; i < 2; i++) {\n        music.playTone(Note.E5, music.beat(BeatFraction.Half));\n        basic.pause(200);\n    }\n});\n\ninput.onButtonPressed(Button.B, function () {\n    // Сигнал для MAYDAY, MAYDAY\n    for (let i = 0; i < 2; i++) {\n        music.playTone(Note.C5, music.beat(BeatFraction.Whole));\n        music.playTone(Note.G4, music.beat(BeatFraction.Whole));\n        basic.pause(400);\n    }\n});\n\ninput.onButtonPressed(Button.AB, function () {\n    // Сигнал для SÉCURITÉ\n    music.playTone(Note.G3, music.beat(BeatFraction.Double));\n    basic.pause(400);\n});\n\nlet timeDown = 0; // Таймер для наклона вниз\nlet timeUp = 0;   // Таймер для наклона вверх\n\nbasic.forever(function () {\n    // Получаем углы тангажа и крена\n    let pitch = input.rotation(Rotation.Pitch); // Вперед/назад\n    let roll = input.rotation(Rotation.Roll);  // Влево/вправо\n\n    // Проверяем вертикальное положение\n    if (Math.abs(pitch) < 10 && Math.abs(roll) < 10) {\n        // Устройство ровное, отображаем горизонтальную линию\n        basic.clearScreen();\n        for (let x = 0; x < 5; x++) {\n            led.plot(x, 2); // Линия по центру\n        }\n        // Сбрасываем таймеры\n        timeDown = 0;\n        timeUp = 0;\n    } else {\n        // Очищаем экран\n        basic.clearScreen();\n\n        // Рисуем наклоненную линию\n        let centerRow = Math.map(pitch, -90, 90, 0, 4);\n        let centerColumn = Math.map(roll, -90, 90, 0, 4);\n        centerRow = Math.clamp(0, 4, Math.round(centerRow));\n        centerColumn = Math.clamp(0, 4, Math.round(centerColumn));\n        for (let x = 0; x < 5; x++) {\n            let row = centerRow + (x - 2) * (centerColumn - 2) / 2;\n            row = Math.clamp(0, 4, Math.round(row));\n            led.plot(x, row);\n        }\n\n        // Проверяем наклон вниз (тангаж больше 45°)\n        if (pitch > 45) {\n            timeDown += 100; // Увеличиваем таймер\n            if (timeDown >= 5000) {\n                // Проигрываем \"Pull Up\" сигнал\n                for (let i = 0; i < 3; i++) {\n                    music.playTone(Note.C5, music.beat(BeatFraction.Quarter));\n                    basic.pause(100);\n                }\n                timeDown = 0; // Сбрасываем таймер\n            }\n        } else {\n            timeDown = 0; // Сбрасываем, если устройство не наклонено\n        }\n\n        // Проверяем наклон вверх (тангаж меньше -45°)\n        if (pitch < -45) {\n            timeUp += 100; // Увеличиваем таймер\n            if (timeUp >= 5000) {\n                // Проигрываем \"Roll\" сигнал\n                for (let i = 0; i < 3; i++) {\n                    music.playTone(Note.G3, music.beat(BeatFraction.Half));\n                    basic.pause(200);\n                }\n                timeUp = 0; // Сбрасываем таймер\n            }\n        } else {\n            timeUp = 0; // Сбрасываем, если устройство не наклонено\n        }\n    }\n\n    basic.pause(100); // Задержка цикла\n});\n\n//      Hello From Ukraine!","README.md":"","pxt.json":"{\n    \"name\": \"Primary Flight Display (PFD)\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[{"id":"42890-07839-75130-00045","timestamp":1733508894115}],"lastSaveTime":1733509068475}